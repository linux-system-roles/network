# SPDX-License-Identifier: BSD-3-Clause
# This file was generated by ensure_provider_tests.py
---
# set network provider and gather facts
- hosts: all
  # yamllint disable rule:line-length
  name: Run playbook 'playbooks/tests_802_1x.yml' with nm as provider
  tasks:
    - name: Include the task 'el_repo_setup.yml'
      include_tasks: tasks/el_repo_setup.yml
    - name: Set network provider to 'nm'
      set_fact:
        network_provider: nm
      tags:
        - always


# The test requires or should run with NetworkManager, therefore it cannot run
# on RHEL/CentOS 6
- name: Import the playbook 'playbooks/tests_802_1x.yml'
  import_playbook: playbooks/tests_802_1x.yml
  when:
    - ansible_distribution_major_version != '6'
    - ansible_distribution != 'RedHat' or
      ansible_distribution_major_version | int < 9
